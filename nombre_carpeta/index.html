define([
        'dojo/_base/declare', 
        'jimu/BaseWidget',
        'jimu/loaderplugins/jquery-loader!./widgets/CustomTinySoap/libs/jquery.min.js, ./widgets/CustomTinySoap/libs/tinysoap-browser-min.js'
    ],
function(declare, BaseWidget, $, tinySoap) {
  //To create a widget, you need to derive from BaseWidget.
  return declare([BaseWidget], {

    // Custom widget code goes here

    baseClass: 'custom-tiny-soap',
    // this property is set by the framework when widget is loaded.
    // name: 'CustomTinySoap',
    // add additional properties here

    //methods to communication with app container:
    postCreate: function() {
      this.inherited(arguments);
      console.log('CustomTinySoap::postCreate');
      var userTxtValue = "rossinyol";
      console.log("... userTxtValue:", userTxtValue);
      
      const url = "//www.icc.cat/geocodificador/ws/ws_1.0?wsdl";

      tinysoap.createClient(url, function(err, client){
                client.setSecurity( tinysoap.WSSecurity('','') ); 
                client.localitzaToponim(argsToponim, function(err, result){
                    console.log('localitzaToponim: ', result['item']);
                    return callback(result['item']);

                }); //END client.localitzaToponim();
            });// END tinySoap.createClient();            
    }

    // startup: function() {
    //   this.inherited(arguments);
    //   console.log('CustomTinySoap::startup');
    // },

    // onOpen: function(){
    //   console.log('CustomTinySoap::onOpen');
    // },

    // onClose: function(){
    //   console.log('CustomTinySoap::onClose');
    // },

    // onMinimize: function(){
    //   console.log('CustomTinySoap::onMinimize');
    // },

    // onMaximize: function(){
    //   console.log('CustomTinySoap::onMaximize');
    // },

    // onSignIn: function(credential){
    //   console.log('CustomTinySoap::onSignIn', credential);
    // },

    // onSignOut: function(){
    //   console.log('CustomTinySoap::onSignOut');
    // }

    // onPositionChange: function(){
    //   console.log('CustomTinySoap::onPositionChange');
    // },

    // resize: function(){
    //   console.log('CustomTinySoap::resize');
    // }

    //methods to communication between widgets:

  });

});
